!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=337)}({337:function(module,exports,__webpack_require__){(function(module){var enterModule;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},Contact=function(){function Contact(e,t,r,n,a){_classCallCheck(this,Contact),this.firstName=e,this.lastName=t,this.address=r,this.city=n,this.email=a}return _createClass(Contact,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Contact}(),FormSent=function(){function FormSent(e,t){_classCallCheck(this,FormSent),this.contact=e,this.products=t}return _createClass(FormSent,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),FormSent}(),Confirm=function(){function Confirm(e,t,r,n,a,o){_classCallCheck(this,Confirm),this.param=e,this.name=t,this.imgUrl=r,this.id=n,this.quantity=a,this.price=o}return _createClass(Confirm,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Confirm}(),OrderConfirm=function(){function OrderConfirm(e,t){_classCallCheck(this,OrderConfirm),this.id=e,this.param=t}return _createClass(OrderConfirm,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),OrderConfirm}(),DomCart={cart:document.getElementById("cart"),cartProducts:document.getElementById("template-cart"),total:document.getElementById("total"),cartFinalPrice:document.getElementById("template-total"),form:document.getElementById("form"),cartForm:document.getElementById("template-form"),buildCart:function(){var e=JSON.parse(localStorage.getItem("cart")),t=!1,r=document.getElementById("toast");e.forEach((function(n,a){var o=document.importNode(DomCart.cartProducts.content,!0),i=o.getElementById("cart-link"),c=o.getElementById("cart-image"),l=o.getElementById("cart-title"),s=o.getElementById("cart-price"),u=o.getElementById("cart-quantity"),m=o.getElementById("btn-more"),d=o.getElementById("btn-less"),f=o.getElementById("cart-products-total");i.href="./product.html?type="+n.param+"&id="+n.id,c.src=n.imgUrl,c.alt="Image de "+n.name,c.title="Image de "+n.name,l.innerHTML=n.name,s.innerHTML="Prix unitaire : "+new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(n.price/100),u.innerHTML="Quantité : "+n.quantity,m.setAttribute("id","btn-more-"+a),m.addEventListener("click",(function(t){n.quantity++,localStorage.setItem("cart",JSON.stringify(e)),r.innerHTML="Quantité modifiée !",r.className="show",setTimeout((function(){r.className=r.className.replace("show","")}),3e3),document.getElementById("cart-num").innerHTML="( "+e.length+" )",setTimeout((function(){location.reload()}),1500)})),d.setAttribute("id","btn-less-"+a),d.addEventListener("click",(function(o){1===e[a].quantity&&(t=!0,1===e.length&&(r.innerHTML=n.name+" a été supprimé et votre panier est vide !",r.className="show",setTimeout((function(){r.className=r.className.replace("show","")}),3e3),document.getElementById("cart-num").innerHTML="( "+e.length+" )",localStorage.clear(),setTimeout((function(){location.reload()}),3100)),e.length>1&&(e[a].quantity--,e.splice(a,1),localStorage.setItem("cart",JSON.stringify(e)),r.innerHTML=n.name+" a été supprimé du panier !",r.className="show",setTimeout((function(){r.className=r.className.replace("show","")}),3e3),document.getElementById("cart-num").innerHTML="( "+e.length+" )",setTimeout((function(){location.reload()}),1500))),e[a].quantity>1&&0==t&&(e[a].quantity--,localStorage.setItem("cart",JSON.stringify(e)),r.innerHTML="Quantité modifiée !",r.className="show",setTimeout((function(){r.className=r.className.replace("show","")}),3e3),document.getElementById("cart-num").innerHTML="( "+e.length+" )",setTimeout((function(){location.reload()}),1500))})),f.innerHTML="Prix total pour cet article : "+new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(n.quantity*n.price/100),DomCart.cart.appendChild(o)}))},buildTotalPrice:function(){var e=JSON.parse(localStorage.getItem("cart")),t=0,r=document.importNode(DomCart.cartFinalPrice.content,!0),n=r.getElementById("cart-total");for(var a in e)t+=e[a].price*e[a].quantity;n.innerHTML="Prix total de votre commande: "+new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t/100),DomCart.total.appendChild(r)},buildForm:function(){var e=JSON.parse(localStorage.getItem("cart")),t=[],r=document.getElementById("toast"),n=document.importNode(DomCart.cartForm.content,!0);function a(e,n){return new Promise((function(a,o){var i=new XMLHttpRequest;i.onreadystatechange=function(e){4===this.readyState&&(201===this.status?a(e=JSON.parse(this.responseText),t.push(new OrderConfirm(e.orderId,JSON.parse(localStorage.getItem("paramOrder")))),localStorage.setItem("orderId",JSON.stringify(t)),localStorage.setItem("contact",JSON.stringify(e.contact))):o(r.innerHTML=this.satus+"\nUne erreur est survenue, merci de réessayer ultérieurement",r.className="show show--alert",setTimeout((function(){r.className=r.className.replace("show show--alert","")}),3e3)))},i.open("POST",e),i.setRequestHeader("Content-Type","application/json"),i.send(JSON.stringify(n))}))}DomCart.form.appendChild(n),document.getElementById("btn-submit").addEventListener("click",(function(n){var o=[];document.getElementById("cart-form").checkValidity()?function(){var r=new Contact(document.getElementById("firstName").value,document.getElementById("lastName").value,document.getElementById("address").value,document.getElementById("city").value,document.getElementById("email").value),n=[];for(var i in e)void 0===o[e[i].param]&&(o[e[i].param]=[]),o[e[i].param].push(e[i].id.toString()),n.push(new Confirm(e[i].param,e[i].name,e[i].imgUrl,e[i].id,e[i].quantity,e[i].price));var c=[];for(var l in o)c.push(l),localStorage.setItem("paramOrder",JSON.stringify(c)),a("http://localhost:3000/api/"+l+"/order",new FormSent(r,o[l])).then((function(){Object.keys(o).length===t.length&&(localStorage.setItem("confirm",JSON.stringify(n)),localStorage.removeItem("cart"),window.location.pathname="/pages/order.html")}))}():(n.preventDefault(),r.innerHTML="Formulaire invalide, merci de bien renseigner tous les champs du formulaire !",r.className="show show--alert",setTimeout((function(){r.className=r.className.replace("show show--alert","")}),3e3))}))},displayCart:function(){JSON.parse(null!==localStorage.getItem("cart"))?(DomCart.buildCart(),DomCart.buildTotalPrice(),DomCart.buildForm()):(setTimeout((function(){alert("Panier vide !\n\nVous allez être redirigé vers la page d'accueil")}),500),setTimeout((function(){window.location.pathname="/index.html"}),600))}},reactHotLoader,leaveModule;window.onload=DomCart.displayCart(),reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(Contact,"Contact","/home/jeremyboisdur/Bureau/developpement-web/orinoco/front/assets/js/cart.js"),reactHotLoader.register(FormSent,"FormSent","/home/jeremyboisdur/Bureau/developpement-web/orinoco/front/assets/js/cart.js"),reactHotLoader.register(Confirm,"Confirm","/home/jeremyboisdur/Bureau/developpement-web/orinoco/front/assets/js/cart.js"),reactHotLoader.register(OrderConfirm,"OrderConfirm","/home/jeremyboisdur/Bureau/developpement-web/orinoco/front/assets/js/cart.js"),reactHotLoader.register(DomCart,"DomCart","/home/jeremyboisdur/Bureau/developpement-web/orinoco/front/assets/js/cart.js")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}).call(this,__webpack_require__(43)(module))},43:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}}});